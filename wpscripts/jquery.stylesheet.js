
(function($){var _ahref=$(document.createElement('a')),_styles=_ahref.prop('style'),_sheet=function(s){return s.sheet||s.styleSheet;}($('<style type="text/css">*{}</style>').appendTo('head')[0]),_rules=('cssRules'in _sheet)?'cssRules':'rules',vendorPrefixes=["Webkit","O","Moz","ms"];function filterStyleSheet(filter,styleSheet){try{if(styleSheet[_rules]){filter=filter||'';var node=$(styleSheet.ownerNode||styleSheet.owningElement);return(filter==='')||(filter==='*')||('#'+(node.prop('id')||'')==filter)||((node.prop('href')||'')==_ahref.prop('href',filter).prop('href'));}else{return false;}}catch(e){return false;}}function parseSelector(selector){var styleSheet=(/.*?{/.exec(selector)||['{'])[0],selectorText=/{.*}/g.exec(selector);if(selectorText===null){var parts=selector.split('{');selectorText='{'+parts[parts.length==1?0:1].split('}')[0]+'}';}else{selectorText=selectorText[0];}return{styleSheet:$.trim(styleSheet.substr(0,styleSheet.length-1)),selectorText:normalizeSelector(selectorText.substr(1,selectorText.length-2))};}function normalizeSelector(selectorText){var selector=[],last,len;last=_sheet[_rules].length;insertRule.call(_sheet,selectorText,';');len=_sheet[_rules].length;for(var i=len-1;i>=last;i--){selector.push(_sheet[_rules][i].selectorText);deleteRule.call(_sheet,i);}return selector.reverse().join(', ');}function matchSelector(cssRule,selectorText,matchGroups){if($.type(cssRule.selectorText)!=='string'){return false;}if(cssRule.selectorText===selectorText){return true;}else if(matchGroups===true){return $($.map(cssRule.selectorText.split(','),$.trim)).filter(function(i){return this.toString()===selectorText;}).length>0;}else{return false;}}function vendorPropName(name){var titleName=name[0].toUpperCase()+name.slice(1),styleName,i=vendorPrefixes.length;while(--i){styleName=vendorPrefixes[i]+titleName;if(styleName in _styles){return styleName;}}return name;}function normalizeRule(rule,styleSheet){rule.ownerDocument=rule.ownerDocument||document;rule.nodeType=rule.nodeType||1;rule.nodeName=rule.nodeName||'DIV';rule.parentNode=rule.parentNode||styleSheet.ownerNode||styleSheet.owningElement;rule.parentStyleSheet=rule.parentStyleSheet||styleSheet;return rule;}try{normalizeRule(_sheet[_rules][0],_sheet);$.support.nativeCSSStyleRule=true;}catch(e){$.support.nativeCSSStyleRule=false;CSSStyleRule=function(rule){$.extend(this,rule);this.rule=rule;this.currentStyle=rule.style;};}function insertRule(selector,css,index){if(!selector||!css){return-1;}var self=this,_insfn=self.insertRule?function(selector,css,index){this.insertRule(selector+'{'+css+'}',index);}:self.addRule;index=index||this[_rules].length;try{return _insfn.call(self,selector,css,index);}catch(e){$.each(selector.split(','),function(i,sel){_insfn.call(self,$.trim(sel),css);});return-1;}}function deleteRule(rule){rule=(rule&&rule.rule)?rule.rule:rule;if(!rule){return;}var self=this,_delfn=self.deleteRule||self.removeRule;if(!_delfn){$(document.styleSheets).each(function(i,styleSheet){if($(styleSheet[_rules]).filter(function(){return this===rule;}).length==1){self=styleSheet;_delfn=self.deleteRule||self.removeRule;return false;}});}if($.type(rule)=='number'){_delfn.call(self,rule);}else{$.each(self[_rules],function(i,_rule){if(rule===_rule){_delfn.call(self,i);return false;}});}}$.stylesheet=function(selector,name,value){if(!(this instanceof $.stylesheet)){return new $.stylesheet(selector,name,value);}this.init(selector);return this.css(name,value);};$.extend($.stylesheet,{cssRules:function(selector){var rules=[],filters=parseSelector(selector);$(document.styleSheets).each(function(i,styleSheet){if(filterStyleSheet(filters.styleSheet,styleSheet)){$.merge(rules,$(styleSheet[_rules]).filter(function(){return matchSelector(this,filters.selectorText,filters.styleSheet==='*');}).map(function(){return normalizeRule($.support.nativeCSSStyleRule?this:new CSSStyleRule(this),styleSheet);}));}});return rules.reverse();},camelCase:$.camelCase||function(str){return str.replace(/-([\da-z])/g,function(a){return a.toUpperCase().replace('-','');});},cssProps:$.cssProps||{},cssStyleName:function(name){if(name){var camelcasedName=$.camelCase(name);if(camelcasedName in _styles){return camelcasedName;}else if(($.cssProps[name]||($.cssProps[name]=vendorPropName(camelcasedName)))in _styles){return $.cssProps[name];}}}});$.stylesheet.fn=$.stylesheet.prototype={init:function(selector){var rules=[];switch($.type(selector)){case'string':rules=$.stylesheet.cssRules(selector);break;case'array':$.each(selector,function(idx,val){if($.type(val)==='string'){$.merge(rules,$.stylesheet.cssRules(val));}else if(val instanceof CSSStyleRule){rules.push(val);}});break;case'object':if(selector instanceof CSSStyleRule){rules.push(val);}break;}$.extend(this,{rules:function(){return rules.slice();},css:function(name,value){var self=this,styles=undefined;switch($.type(name)){case'null':$.each(rules,function(idx,rule){deleteRule.call(rule.parentStyleSheet,rule);});rules=$.stylesheet.cssRules(selector);return self;case'string':var stylename=$.stylesheet.cssStyleName(name);if(stylename){if(rules.length===0&&value!==undefined){var filters=parseSelector(selector),sheet=$(document.styleSheets).filter(function(){return filterStyleSheet(filters.styleSheet,this);});sheet=(sheet&&sheet.length==1)?sheet[0]:_sheet;insertRule.call(sheet,filters.selectorText,name+':'+value+';');rules=$.stylesheet.cssRules(selector);styles=self;}else{$.each(rules,function(i,rule){if(rule.style[stylename]!==''){if(value!==undefined){rule.style[stylename]=value;styles=self;}else{styles=rule.style[stylename];}return false;}});if(styles===undefined&&value!==undefined){rules[0].style[stylename]=value;styles=self;}}}break;case'array':styles={};$.each(name,function(idx,key){styles[key]=self.css(key,value);});if(value!==undefined){styles=self;}break;case'object':$.each(name,function(key,val){self.css(key,val);});return self;default:return self;}return styles;}});}};})(jQuery);